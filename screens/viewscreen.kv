#:import KivyLexer kivy.extras.highlight.KivyLexer

<ViewScreen>:
	#text_input: text_input
	tabarea: tabarea
	volSlider: s1
	bpsSlider: bpsSlider
	BoxLayout:
		size: self.parent.size
		orientation: 'vertical'
		spacing: 200
		#control Menu
		StackLayout:
			#Control Menu Decided to make it a seperate menu from the nav menu
		    #orientation: 'horizontal'
			size_hint_y: None
			y: root.height - 80
			#spacing: 100

			Button:
				size_hint_x: .04
				text: 'Save'
				on_press: root.show_save()
			ToggleButton:
				id: playbtn
				size_hint_x: .03
				#size_hint_y: .10
				#text: 'play/pause'
				background_normal: 'Assets/images/play2.png'
				background_down: 'Assets/images/pause2.png'
				on_press: root.play_pause(*args)
			Label:
				size_hint_x: .15
				text: 'Beats per Minute (BPM) %s' % int(bpsSlider.value)
			Slider:
				size_hint_x: .25
            	id: bpsSlider
            	value: 60
            	range: (0,300)
            	step: 10
			CheckBox:
				id: 'soundPlay'
				group: 'soundPlay'
				size_hint_x: .03
	            on_active: root.on_checkbox_active(self, *args)
	        Label:
	        	size_hint_x: .15
				text: 'AutoScroll'
	        CheckBox:
	        	id: 'autoScroll'
	        	group: 'autoScroll'
	        	size_hint_x: .03
	            on_active: root.on_checkbox_active(self, *args)

			Button:
				size_hint_x: .04
				#size_hint_y: .75
				#text: 'Slider value is %s' % int(s1.value) if s1.value else 'Slider not set'
				background_normal: 'atlas://data/images/defaulttheme/audio-volume-high' if s1.value > .65 else 'atlas://data/images/defaulttheme/audio-volume-medium' if .25 < s1.value < .70 else 'atlas://data/images/defaulttheme/audio-volume-low' if 0 < s1.value < .30 else 'atlas://data/images/defaulttheme/audio-volume-muted'
				background_down: 'atlas://data/images/defaulttheme/audio-volume-high' if s1.value > .65 else 'atlas://data/images/defaulttheme/audio-volume-medium' if .25 < s1.value < .70 else 'atlas://data/images/defaulttheme/audio-volume-low' if 0 < s1.value < .30 else 'atlas://data/images/defaulttheme/audio-volume-muted'
	        Slider:
				size_hint_x: .15
	            id: s1
	            value: 1
	            range: (0,1)
	            step: .1
		# Tab drawing area
		TabArea:
			id: tabarea

		#Widget
		#Widget
		#Slider
			#id: Volume
			#size_hint: (1, .15)
			#pos_hint: {bottom + '100': .70}
			#value: 50
			#range: (0,100)
			#step: 5
			#volume: Volume.setter(self)
		ActionBar:
			pos_hint: {'bottom':1}
			ActionView:
				use_separator: True
				ActionPrevious:
					title: 'Editor Toolbar'
					with_previous: False
				ActionOverflow:
				ActionButton:
					text: 'Btn0'
					#icon: 'atlas://data/images/defaulttheme/audio-volume-high' if Volume.value > 65 else 'atlas://data/images/defaulttheme/audio-volume-medium' if 25 < Volume.value < 70 else 'atlas://data/images/defaulttheme/audio-volume-low' if 0 < Volume.value < 30 else 'atlas://data/images/defaulttheme/audio-volume-muted'
				ActionButton:
					text: 'Hammer On'
				ActionButton:
					text: 'Slide Off'
				ActionButton:
					text: "Thor"
					icon: 'Assets/images/hammer.jpg'
				ActionButton:
					text: 'Btn4'
				ActionButton
					#text: '%s' % int(Volume.value)
				ActionButton
					icon: 'Assets/images/hammer.jpg'

<TabCanvas>

<TabArea>
	id: tabArea
	tabCanvas: tabCanvas
	slide: slide
	scrlv: scrlv

	BoxLayout:
		orientation: 'vertical'
		ScrollView:
			id: scrlv
			scroll_x: (root.slider_change, root.slide)
			bar_width: 0
			do_scroll_y: False
			TabCanvas:
				id: tabCanvas
				on_touch_down: tabArea.tabTouched(args[1])
				size_hint_x: 5
		Slider:
			id: slide
			value: (root.scroll_change, root.scrlv)
			min: 0
			max: 1
			orientation: 'horizontal'
			step: 0.01
			size_hint: (1, 0.1)
			#value: scroll_change
			#on_scroll_x: slider_change()

<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserIconView:
            id: filechooser
            path: app.curDirectory
            filters: ['*.txt']#filters so only .txt files appear.
        BoxLayout:
            size_hint_y: .15
            Button:
				#size_hint: (.5,.20)
                text: "Cancel"
                on_release: root.cancel()
            Button:
				#size_hint: (.5,.2)
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<SaveDialog>:
	id: saveDialog
    text_input: fileName
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserIconView:
            id: filechooser
            path: app.curDirectory
            on_selection: fileName.text = self.selection and self.selection[0] or ''

        TextInput:
            id: fileName
            size_hint_y: None
            height: 100
            multiline: False

        BoxLayout:
        	size_hint_y: .15
            #size_hint_y: None
            height: 100
            Button:
                text: "Cancel"
                on_release: root.cancel()
            Button:
                text: "Save"
                on_release: root.save(filechooser.path, fileName.text)
